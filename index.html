<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Envelope</title>
<style>
    body {
        font-family: 'Poppins', sans-serif;
        margin: 0;
        background: linear-gradient(to bottom, #ffdde1, #ee9ca7);
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
    }
    .envelope {
        position: relative;
        width: 300px;
        height: 200px;
        cursor: pointer;
    }
    .envelope-back {
        position: absolute;
        width: 100%;
        height: 100%;
        background: #ff6f91;
        border-radius: 5px;
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
        z-index: 1;
    }
    .envelope-flap {
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 0;
        border-left: 150px solid transparent;
        border-right: 150px solid transparent;
        border-bottom: 100px solid #ff8fab;
        transform-origin: top;
        transition: transform 0.6s ease;
        z-index: 3;
    }
    .letter {
        position: absolute;
        top: 10px;
        left: 10px;
        width: 280px;
        height: 350px;
        background: white;
        border-radius: 5px;
        padding: 15px;
        text-align: center;
        box-sizing: border-box;
        transform: translateY(120%);
        opacity: 0;
        transition: transform 0.6s ease, opacity 0.6s ease;
        z-index: 2;
    }
    .letter h2 {
        margin: 0;
        color: #ff6f91;
    }
    .open .envelope-flap {
        transform: rotateX(180deg);
    }
    canvas {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
    }
</style>
</head>
<body>

<div class="envelope" id="envelope">
    <div class="envelope-back"></div>
    <div class="envelope-flap"></div>
    <div class="letter">
        <h2>Happy Birthday! ðŸŽ‰</h2>
        <p>Wishing you a day full of joy, itatagalog ko na ah kasi parang nakakanose bleed pag 
            straight english. Enjoy ka sa araw mo kahit di ako nakapunta, I still 
            make an effort to your Birthday Kresha. Aphrodite by The Ridleys
            pinili ko yan kasi alam ko maganda ka and 
            how cute you are live the life you want KRESHA. Yun lang  
            and once again HAPPY BIRTHDAY! Kahit bawal mag celebrate ng Bday,  
            I will greet you pa rin. LOVE LOTS, KURTY ðŸŽ‚ðŸ’–</p>
    </div>
</div>

<canvas id="confetti"></canvas>

<!-- Background music -->
<audio id="bgMusic" loop>
    <source src="The Ridleys - Aphrodite (Lyric Video).mp3" type="audio/mpeg">
</audio>

<script>
    const envelope = document.getElementById("envelope");
    const letter = document.querySelector(".letter");
    const bgMusic = document.getElementById("bgMusic");
    let confettiInterval;

    envelope.addEventListener("click", () => {
        if (!envelope.classList.contains("open")) {
            envelope.classList.add("open");

            setTimeout(() => {
                letter.style.transform = "translateY(0)";
                letter.style.opacity = "1";
                bgMusic.play();
            }, 600);

            startConfetti();
        } else {
            letter.style.transform = "translateY(120%)";
            letter.style.opacity = "0";
            bgMusic.pause();
            bgMusic.currentTime = 0;

            setTimeout(() => {
                envelope.classList.remove("open");
            }, 300);

            stopConfetti();
        }
    });

    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const confetti = Array.from({length: 100}).map(() => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height - canvas.height,
        r: Math.random() * 6 + 2,
        d: Math.random() * 0.5 + 0.5,
        color: `hsl(${Math.random() * 360}, 100%, 50%)`
    }));

    function drawConfetti() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        confetti.forEach(c => {
            ctx.beginPath();
            ctx.arc(c.x, c.y, c.r, 0, Math.PI * 2, false);
            ctx.fillStyle = c.color;
            ctx.fill();
        });
        updateConfetti();
    }

    function updateConfetti() {
        confetti.forEach(c => {
            c.y += c.d * 5;
            if (c.y > canvas.height) {
                c.y = -10;
                c.x = Math.random() * canvas.width;
            }
        });
    }

    function startConfetti() {
        if (!confettiInterval) {
            confettiInterval = setInterval(drawConfetti, 20);
        }
    }

    function stopConfetti() {
        clearInterval(confettiInterval);
        confettiInterval = null;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
</script>

</body>
</html>
